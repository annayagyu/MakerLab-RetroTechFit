# üíß HydroSense: Documenta√ß√£o T√©cnica

O **HydroSense** √© o m√≥dulo de gest√£o h√≠drica inteligente do ecossistema Kite. Ele foca no monitoramento cont√≠nuo do fluxo de √°gua para identificar vazamentos silenciosos, torneiras esquecidas ou rupturas de canos, efetuando o bloqueio autom√°tico do suprimento.

## üìö 1. Bibliotecas Necess√°rias
Para compilar este c√≥digo, √© necess√°rio instalar:
* **ESP32Servo**: Utilizada para o controle do servo motor que opera como registro de seguran√ßa.

## üõ†Ô∏è 2. Itens do Simulador (Hardware)
No Wokwi, utilize os seguintes componentes:
* **ESP32 DevKit V1**.
* **Potenci√¥metro** (Simulando o Sensor de Fluxo Hall YF-S201).
* **Micro Servo Motor** (Representando a V√°lvula de Corte/Registro Geral).
* **Pushbutton** (Bot√£o de Reset/Reabertura manual).
* **2 LEDs** (Azul para fluxo ativo e Vermelho para bloqueio).

## üîå 3. Guia de Conex√£o (Pinagem)
| Componente | Pino no ESP32 | Fun√ß√£o |
| :--- | :--- | :--- |
| **Sensor de Fluxo (SIG)** | D34 (Analog) | Leitura da intensidade da vaz√£o |
| **Servo Motor (PWM)** | D12 | Controle do Registro de √Ågua |
| **Bot√£o de Reset** | D25 | Reabertura manual da v√°lvula |
| **LED Azul** | D19 | Status: Sistema Aberto / Fluxo Normal |
| **LED Vermelho** | D4 | Status: Vazamento Detectado / Corte Ativo |

## üïπÔ∏è 4. Comportamento do Sistema
Diferente de sensores de impacto, o HydroSense trabalha com a vari√°vel **Tempo x Intensidade**:

1. **Monitoramento de Fluxo:** O sistema classifica a vaz√£o em tr√™s categorias baseadas na leitura anal√≥gica:
   - **BAIXA (< 1500):** Indica poss√≠veis gotejamentos ou vazamentos em descargas.
   - **NORMAL (1500 - 3000):** Uso comum (torneiras, chuveiros).
   - **INTENSA (> 3000):** Poss√≠vel torneira esquecida totalmente aberta ou cano rompido.
2. **L√≥gica de Corte (30 segundos):** Se qualquer fluxo persistir ininterruptamente por mais de 30 segundos, o sistema entende como uma anomalia (vazamento ou esquecimento) e fecha o servo (posi√ß√£o 0¬∞).
3. **Reset de Seguran√ßa:** Ap√≥s o corte, a v√°lvula permanece fechada mesmo que o fluxo pare. A reabertura s√≥ ocorre via **Bot√£o de Reset F√≠sico** (Pino 25) ou comando remoto, for√ßando o usu√°rio a verificar a causa do problema.



## üåç 5. Vis√£o de Mundo Real e Sustentabilidade

### Detec√ß√£o de Vazamentos Silenciosos
Na vida real, o sensor de fluxo YF-S201 possui uma turbina magn√©tica interna. Cada vez que a √°gua passa, ela gira e o sensor de **Efeito Hall** conta os pulsos. Em um gotejamento impercept√≠vel, a turbina gira muito devagar, mas de forma constante. O HydroSense captura essa persist√™ncia que os hidr√¥metros comuns muitas vezes ignoram.



### O Atuador de Corte (Retrofit)
No prot√≥tipo, o Servo Motor representa o bra√ßo mec√¢nico que gira um registro de esfera ou aciona uma **V√°lvula Solenoide**. 
- **Sustentabilidade:** Evita o desperd√≠cio de milhares de litros de √°gua pot√°vel.
- **Preven√ß√£o de Danos:** Evita inunda√ß√µes que poderiam destruir m√≥veis, pisos e eletr√¥nicos, especialmente em apartamentos onde vazamentos afetam vizinhos.

### Modo Manuten√ß√£o
O sistema prev√™ atualiza√ß√µes futuras para um "Modo Encher Piscina/Banheira", permitindo que o usu√°rio desative temporariamente o timer de 30 segundos via aplicativo, garantindo conveni√™ncia sem perder a seguran√ßa a longo prazo.

Link : https://wokwi.com/projects/456417552278824961
